(function(e){function t(t){for(var n,r,o=t[0],u=t[1],l=t[2],d=0,p=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);c&&c(t);while(p.length)p.shift()();return a.push.apply(a,l||[]),s()}function s(){for(var e,t=0;t<a.length;t++){for(var s=a[t],n=!0,o=1;o<s.length;o++){var u=s[o];0!==i[u]&&(n=!1)}n&&(a.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},i={app:0},a=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var c=u;a.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"0d4a":function(e,t,s){},1551:function(e,t,s){"use strict";s("6861")},"5c0b":function(e,t,s){"use strict";s("9c0c")},6861:function(e,t,s){},"697f":function(e,t,s){},"720a":function(e,t,s){},"7c4d":function(e,t,s){"use strict";s("720a")},"85a1":function(e,t,s){},"9c0c":function(e,t,s){},c4fd:function(e,t,s){"use strict";s("0d4a")},c880:function(e,t,s){"use strict";s("697f")},c9d4:function(e,t,s){},cd49:function(e,t,s){"use strict";s.r(t);var n=s("2b0e"),i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("app-controls",{staticClass:"header"}),s("h2",[e._v("Settings")]),s("test-settings"),s("h2",[e._v("Questions")]),s("ul",{staticClass:"test-questions"},[e._l(e.questions,(function(t,n){return s("test-question",{key:n,attrs:{index:n,question:t.text,edit:t.editMode,image:t.questionImage,answersType:t.answersType},on:{edit:function(){return e.editMode({questionIndex:n,enable:!t.editMode})},remove:function(){return e.removeQuestion(n)},change:function(t){return e.updateQuestion({questionIndex:n,data:t})}}},[e._l(t.answers,(function(i,a){return s("test-answer",{key:a,attrs:{questionIndex:n,text:i.text,correct:i.isCorrect,multiple:t.multiple,edit:t.editMode,isImage:"image"==t.answersType},on:{remove:function(){return e.removeAnswer({questionIndex:n,index:a})},change:function(t){return e.updateAnswer({questionIndex:n,index:a,data:t})}}})})),0==t.answers.length?s("li",[s("p",{staticClass:"info"},[e._v("No answers for this question.")])]):e._e(),t.editMode?s("test-answer",{attrs:{questionIndex:n,multiple:t.multiple,edit:!0,isNew:!0},on:{add:function(t){return e.newAnswer({questionIndex:n,data:t})}}}):e._e()],2)})),0==e.questions.length?s("li",[s("p",{staticClass:"info"},[e._v("There are no questions in test.")])]):e._e(),s("li",{staticClass:"controls"},[s("button",{on:{click:function(){return e.newQuestion(!1)}}},[e._v("Add question (single answer)")]),s("button",{on:{click:function(){return e.newQuestion(!0)}}},[e._v("Add question (multiple answers)")])])],2),s("app-controls",{staticClass:"footer"})],1)},a=[],r=s("2f62"),o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"controls"},[s("label",{staticClass:"load-file"},[s("input",{attrs:{type:"file",accept:"application/json"},on:{change:e.loadHandler}}),e._v(" ðŸ— Open ")]),s("button",{on:{click:e.saveHandler}},[e._v("ðŸ–« Save")]),e.isClipboard?[s("button",{on:{click:e.copyHandler}},[e._v("Copy")]),s("button",{on:{click:e.pastHandler}},[e._v("Paste")])]:e._e(),s("button",{on:{click:e.clear}},[e._v("ðŸ—˜ Clear")])],2)},u=[],l=s("9ab4");function c({text:e,multiple:t,answers:s,answersType:n,questionImage:i}){return{question:e,multiple:t,questionImage:i,answersType:n,answers:s.map(e=>e.text)}}function d({testSettings:e,questions:t}){return{public:Object.assign(Object.assign({},e),{questions:t.map(c)}),answers:t.map(e=>e.answers.map((e,t)=>e.isCorrect?t:-1).filter(e=>e>=0))}}const p=e=>JSON.stringify(e,null,2),m=document.createElement("a");function h(e,t){const s=new Blob([e],{type:"application/json"});m.href=URL.createObjectURL(s),m.download=t,m.click()}var g=n["a"].extend({name:"AppControls",computed:Object.assign(Object.assign({},Object(r["c"])(["fileName"])),{isClipboard(){return"undefined"!=typeof window.navigator.clipboard}}),methods:Object.assign(Object.assign({},Object(r["b"])(["getTest","clear","load"])),{loadHandler(e){return Object(l["a"])(this,void 0,void 0,(function*(){const t=e.target;if(!t.files)return;const s=yield t.files[0].text(),n=JSON.parse(s);this.load({fileName:t.files[0].name,data:n}),this.$nextTick(()=>{t.value=""})}))},saveHandler(){return Object(l["a"])(this,void 0,void 0,(function*(){const e=yield this.getTest();h(p(e),this.fileName)}))},copyHandler(e){return Object(l["a"])(this,void 0,void 0,(function*(){const t=e.target,s=t.textContent;t.disabled=!0;const n=yield this.getTest();try{yield window.navigator.clipboard.writeText(p(n)),t.innerText="Copied!"}catch(i){t.innerText="Fail!"}setTimeout(()=>{t.innerText=String(s),t.disabled=!1},1e3)}))},pastHandler(){var e,t,s,n,i,a;return Object(l["a"])(this,void 0,void 0,(function*(){const r=yield window.navigator.clipboard.readText();if(r)try{const o=JSON.parse(r);if(console.log(null===(e=o.public)||void 0===e?void 0:e.questions,null===(t=o.public)||void 0===t?void 0:t.tresholdPercentage,o.answers),!Array.isArray(null===(s=o.public)||void 0===s?void 0:s.questions)||!Array.isArray(o.answers)||"undefined"==typeof(null===(n=o.public)||void 0===n?void 0:n.tresholdPercentage)||"undefined"==typeof(null===(i=o.public)||void 0===i?void 0:i.maxAttemptsNumber)||"undefined"==typeof(null===(a=o.public)||void 0===a?void 0:a.numberOfQuestions))throw Error("invalid data format");this.load({fileName:"unknown-test.json",data:o})}catch(o){window.alert("Invalid data format in buffer."),console.error(o)}}))}})}),f=g,v=(s("c4fd"),s("2877")),b=Object(v["a"])(f,o,u,!1,null,null,null),w=b.exports,x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",{staticClass:"test-settings"},[s("li",[s("label",{attrs:{for:"tresholdPercentage"}},[e._v("Treshold percentage:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.tresholdPercentage,expression:"tresholdPercentage"}],attrs:{id:"tresholdPercentage",type:"number",min:"0",max:"100"},domProps:{value:e.tresholdPercentage},on:{input:function(t){t.target.composing||(e.tresholdPercentage=t.target.value)}}})]),s("li",[s("label",{attrs:{for:"numberOfQuestions"}},[e._v("Number of questions: ")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.numberOfQuestions,expression:"numberOfQuestions"}],attrs:{id:"numberOfQuestions",type:"number"},domProps:{value:e.numberOfQuestions},on:{input:function(t){t.target.composing||(e.numberOfQuestions=t.target.value)}}})]),s("li",[s("label",{attrs:{for:"maxAttemptsNumber"}},[e._v("Max attempts:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.maxAttemptsNumber,expression:"maxAttemptsNumber"}],attrs:{id:"maxAttemptsNumber",type:"number"},domProps:{value:e.maxAttemptsNumber},on:{input:function(t){t.target.composing||(e.maxAttemptsNumber=t.target.value)}}})]),s("li",[s("label",{attrs:{for:"strictAttemptsMode"}},[e._v("Strict attempts mode:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.strictAttemptsMode,expression:"strictAttemptsMode"}],attrs:{id:"strictAttemptsMode",type:"checkbox"},domProps:{checked:Array.isArray(e.strictAttemptsMode)?e._i(e.strictAttemptsMode,null)>-1:e.strictAttemptsMode},on:{change:function(t){var s=e.strictAttemptsMode,n=t.target,i=!!n.checked;if(Array.isArray(s)){var a=null,r=e._i(s,a);n.checked?r<0&&(e.strictAttemptsMode=s.concat([a])):r>-1&&(e.strictAttemptsMode=s.slice(0,r).concat(s.slice(r+1)))}else e.strictAttemptsMode=i}}})])])},q=[],y=n["a"].extend({name:"TestSettings",computed:{tresholdPercentage:{get(){return this.$store.state.testSettings.tresholdPercentage},set(e){this.$store.dispatch("setSettings",{tresholdPercentage:Number(e)})}},numberOfQuestions:{get(){return this.$store.state.testSettings.numberOfQuestions},set(e){this.$store.dispatch("setSettings",{numberOfQuestions:Number(e)})}},maxAttemptsNumber:{get(){return this.$store.state.testSettings.maxAttemptsNumber},set(e){this.$store.dispatch("setSettings",{maxAttemptsNumber:Number(e)})}},strictAttemptsMode:{get(){return this.$store.state.testSettings.strictAttemptsMode},set(e){this.$store.dispatch("setSettings",{strictAttemptsMode:e})}}}}),A=y,_=(s("c880"),Object(v["a"])(A,x,q,!1,null,null,null)),O=_.exports,I=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"test-question"},[e.image?s("div",{staticClass:"question-image"},[s("img",{attrs:{src:e.image,alt:"Image for question #"+e.num}})]):e._e(),s("span",[e._v(e._s(e.num))]),s("editable-text",{staticClass:"question-text",attrs:{edit:e.edit,value:e.question,multiline:!0,placeholder:"Please, write the question here"},on:{input:e.changeQuestion}}),s("button",{attrs:{title:"Delete question"},on:{click:function(t){return e.$emit("remove")}}},[e._v("âœ–")]),s("button",{attrs:{title:e.edit?"OK":"Edit"},on:{click:function(t){return e.$emit("edit")}}},[e._v(e._s(e.edit?"âœ”":"âœŽ"))]),e.edit?s("div",{staticClass:"image-type"},[s("span",[e._v("Image:")]),s("editable-text",{staticClass:"image-field",attrs:{edit:e.edit,value:e.questionImage,placeholder:"Question image"},on:{input:e.changeImage}}),s("span",[e._v("Answers type:")]),s("answers-tyep-select",{staticClass:"type-select",attrs:{value:e.type},on:{input:e.changeAnswersType}})],1):e._e(),s("ul",{staticClass:"test-answers"},[s("li",[e.edit?s("h4",[e._v("Answers:")]):e._e()]),e._t("default")],2)],1)},S=[],N=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editable-text"},[e.edit&&!e.multiline?s("input",{ref:"editField",attrs:{type:"text",placeholder:e.placeholder},domProps:{value:e.value},on:{change:function(t){return e.inputHandler(t.target.value)}}}):e.edit?s("textarea",{ref:"editMultiField",attrs:{placeholder:e.placeholder},domProps:{value:e.value},on:{change:function(t){return e.inputHandler(t.target.value)}}}):s("span",[e._v(e._s(e.value))])])},k=[],T=n["a"].extend({name:"EditableText",props:{edit:Boolean,value:String,multiline:Boolean,placeholder:String},methods:{inputHandler(e){this.$emit("input",e)}},watch:{edit(e){e&&this.$nextTick(()=>{this.multiline?this.$refs["editMultiField"].focus():this.$refs["editField"].focus()})}}}),M=T,C=(s("ff8c"),Object(v["a"])(M,N,k,!1,null,null,null)),j=C.exports,Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("select",{on:{change:e.change}},e._l(e.answerTypes,(function(t,n){return s("option",{key:n,domProps:{value:t.key,selected:t.key==e.value}},[e._v(" "+e._s(t.value)+" ")])})),0)},$=[],P=n["a"].extend({name:"AnswerTypeSelect",props:{value:String},data(){return{answerTypes:[{key:"",value:" "},{key:"image",value:"Image"}]}},methods:{change(e){const t=e.target;this.$emit("input",t.value)}}}),E=P,H=Object(v["a"])(E,Q,$,!1,null,null,null),B=H.exports,D=n["a"].extend({name:"TestQuestion",components:{EditableText:j,AnswersTyepSelect:B},props:{edit:Boolean,question:String,image:String,answersType:String,index:Number},computed:{type(){var e;return null!==(e=this.answersType)&&void 0!==e?e:""},questionImage(){var e;return null!==(e=this.image)&&void 0!==e?e:""},num(){return`#${this.index<9?"0":""}${this.index+1}`}},methods:{changeQuestion(e){this.$emit("change",{text:e,questionImage:this.image,answersType:this.answersType})},changeImage(e){this.$emit("change",{text:this.question,questionImage:e,answersType:this.answersType})},changeAnswersType(e){this.$emit("change",{text:this.question,questionImage:this.image,answersType:e||void 0})}}}),J=D,F=(s("1551"),Object(v["a"])(J,I,S,!1,null,null,null)),L=F.exports,R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("li",{staticClass:"test-answer"},[e.isNew?s("h4",[e._v("Add new answer:")]):e._e(),s("editable-mark",{staticClass:"answer-mark",attrs:{value:e.isNew?e.newData.isCorrect:e.correct,edit:e.edit,group:e.group,multiple:e.multiple},on:{input:e.changeMark}}),!e.edit&&e.isImage?s("div",{staticClass:"answer-image"},[s("img",{attrs:{src:e.text,alt:"Answer image for "+(e.questionIndex+1)+" question"}})]):s("editable-text",{staticClass:"answer-text",attrs:{value:e.isNew?e.newData.text:e.text,edit:e.edit,placeholder:"Please, write the answer here"},on:{input:e.changeText}}),e.edit&&!e.isNew?s("button",{attrs:{title:"Delete answer"},on:{click:function(t){return e.$emit("remove")}}},[e._v("âœ–")]):e._e(),e.edit&&e.isNew?s("button",{attrs:{title:"Add new answer"},on:{click:e.addNew}},[e._v("âœš")]):e._e()],1)},U=[],K=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"editable-mark"},[e.edit?s("input",{attrs:{type:e.multiple?"checkbox":"radio",name:e.group},domProps:{checked:e.value},on:{change:e.checkHandler}}):s("span",{class:{correct:e.value}},[e._v(" "+e._s(e.value?"âœ”":"âœ˜")+" ")])])},z=[],G=n["a"].extend({name:"EditableMark",props:{edit:Boolean,value:Boolean,group:String,multiple:Boolean},methods:{checkHandler(e){this.$emit("input",e.target.checked)}}}),V=G,W=(s("d52e"),Object(v["a"])(V,K,z,!1,null,null,null)),X=W.exports,Y=n["a"].extend({name:"TestAnswer",components:{EditableMark:X,EditableText:j},props:{edit:Boolean,questionIndex:Number,text:String,correct:Boolean,multiple:Boolean,isNew:Boolean,isImage:Boolean},data(){return{group:void 0!==this.questionIndex?"q-"+this.questionIndex:void 0,newData:{text:"",isCorrect:!1}}},methods:{addNew(){this.$emit("add",this.newData),this.$nextTick(()=>{this.newData.text="",this.newData.isCorrect=!1})},changeMark(e){this.isNew?this.newData.isCorrect=e:this.$emit("change",{text:this.text,isCorrect:e})},changeText(e){this.isNew?this.newData.text=e:this.$emit("change",{text:e,isCorrect:this.correct})}}}),Z=Y,ee=(s("7c4d"),Object(v["a"])(Z,R,U,!1,null,null,null)),te=ee.exports,se=n["a"].extend({name:"App",components:{AppControls:w,TestSettings:O,TestQuestion:L,TestAnswer:te},computed:{questions(){return this.$store.state.questions}},methods:Object.assign({},Object(r["b"])(["editMode","newQuestion","removeQuestion","removeAnswer","newAnswer","updateAnswer","updateQuestion"])),mounted(){this.$store.dispatch("restore")}}),ne=se,ie=(s("5c0b"),Object(v["a"])(ne,i,a,!1,null,null,null)),ae=ie.exports;function re(e){return{maxAttemptsNumber:e.public.maxAttemptsNumber,numberOfQuestions:e.public.numberOfQuestions,strictAttemptsMode:e.public.strictAttemptsMode,tresholdPercentage:e.public.tresholdPercentage}}function oe(e){return e.public.questions.map(({question:t,answers:s,multiple:n,answersType:i,questionImage:a},r)=>({text:t,multiple:n,editMode:!1,questionImage:a,answersType:i,answers:s.map((t,s)=>({text:t,isCorrect:e.answers[r].includes(s)}))}))}n["a"].use(r["a"]);const ue={tresholdPercentage:90,numberOfQuestions:10,maxAttemptsNumber:2,strictAttemptsMode:!1},le=[];var ce=new r["a"].Store({state:{fileName:"new-test.json",testSettings:Object.assign({},ue),questions:[...le]},mutations:{setSettings({testSettings:e},t){var s,n,i,a;e.maxAttemptsNumber=null!==(s=t.maxAttemptsNumber)&&void 0!==s?s:e.maxAttemptsNumber,e.numberOfQuestions=null!==(n=t.numberOfQuestions)&&void 0!==n?n:e.numberOfQuestions,e.strictAttemptsMode=null!==(i=t.strictAttemptsMode)&&void 0!==i?i:e.strictAttemptsMode,e.tresholdPercentage=null!==(a=t.tresholdPercentage)&&void 0!==a?a:e.tresholdPercentage},addQuestion({questions:e},t){e.push(Object.assign({},t))},removeQuestion({questions:e},t){e.splice(t,1)},updateQuestion({questions:e},t){var s,n,i;e[t.questionIndex].text=null!==(s=t.data.text)&&void 0!==s?s:e[t.questionIndex].text,e[t.questionIndex].questionImage=t.data.questionImage,e[t.questionIndex].answersType=t.data.answersType,e[t.questionIndex].editMode=null!==(n=t.data.editMode)&&void 0!==n?n:e[t.questionIndex].editMode,e[t.questionIndex].multiple=null!==(i=t.data.multiple)&&void 0!==i?i:e[t.questionIndex].multiple},addAnswer({questions:e},t){t.data.isCorrect&&!e[t.questionIndex].multiple&&e[t.questionIndex].answers.forEach(e=>e.isCorrect=!1),e[t.questionIndex].answers.push(Object.assign({},t.data))},removeAnswer({questions:e},t){e[t.questionIndex].answers.splice(t.index,1)},updateAnswer({questions:e},t){var s,n;e[t.questionIndex].answers[t.index].text=null!==(s=t.data.text)&&void 0!==s?s:e[t.questionIndex].answers[t.index].text,t.data.isCorrect&&!e[t.questionIndex].multiple&&e[t.questionIndex].answers.forEach(e=>e.isCorrect=!1),e[t.questionIndex].answers[t.index].isCorrect=null!==(n=t.data.isCorrect)&&void 0!==n?n:e[t.questionIndex].answers[t.index].isCorrect},changeEditMode({questions:e},t){t.enable&&e.forEach(e=>e.editMode=!1),e[t.questionIndex].editMode=t.enable},setState(e,{fileName:t,data:s}){e.testSettings=re(s),e.questions=oe(s),e.fileName=t},restoreState(e,{testSettings:t,questions:s,fileName:n}){e.testSettings=t,e.questions=s,e.fileName=n},clearState(e){e.testSettings=Object.assign({},ue),e.fileName="new-test.json",e.questions=[...le]}},actions:{setSettings({commit:e,dispatch:t},s){e("setSettings",s),t("backup")},newQuestion({commit:e,state:t,dispatch:s},n){const i={text:"Question "+(t.questions.length+1),multiple:n,answers:[],editMode:!1};e("addQuestion",i),e("changeEditMode",{questionIndex:t.questions.length-1,enable:!0}),s("backup")},removeQuestion({commit:e,dispatch:t},s){e("removeQuestion",s),t("backup")},updateQuestion({commit:e,dispatch:t},s){e("updateQuestion",s),t("backup")},editMode({commit:e,dispatch:t},s){e("changeEditMode",s),t("backup")},newAnswer({commit:e,dispatch:t},s){e("addAnswer",s),t("backup")},removeAnswer({commit:e,dispatch:t},s){e("removeAnswer",s),t("backup")},updateAnswer({commit:e,dispatch:t},s){e("updateAnswer",s),t("backup")},getTest({state:e}){return Promise.resolve(d(e))},load({commit:e,dispatch:t},s){e("setState",s),t("backup")},backup({state:e}){const t=JSON.stringify(e);window.localStorage.setItem("editor-state",t)},restore({commit:e}){const t=window.localStorage.getItem("editor-state");if(!t)return;const s=JSON.parse(t);e("restoreState",s)},clear({commit:e}){e("clearState"),window.localStorage.removeItem("editor-state")}}});n["a"].config.productionTip=!1,new n["a"]({store:ce,render:e=>e(ae)}).$mount("#app")},d52e:function(e,t,s){"use strict";s("c9d4")},ff8c:function(e,t,s){"use strict";s("85a1")}});
//# sourceMappingURL=app.5a9d0467.js.map